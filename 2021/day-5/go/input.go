package main

type point struct {
	x, y int
}

type line struct {
	p1, p2 point
}

func (l line) diagonal() bool {
	return l.p1.x != l.p2.x && l.p1.y != l.p2.y
}

// points returns all of the points in a line
func (l line) points() []point {
	pts := []point{l.p1}
	xi, yi := l.p1.x, l.p1.y
	var xdone, ydone bool
	for !(xdone && ydone) {
		xdone, xi = stepTo(xi, l.p2.x)
		ydone, yi = stepTo(yi, l.p2.y)
		pts = append(pts, point{xi, yi})
	}
	return pts
}

func stepTo(i, to int) (done bool, inc int) {
	switch {
	case i < to:
		i++
		return i == to, i
	case i > to:
		i--
		return i == to, i
	}
	return true, to
}

var sample = []line{
	{point{0, 9}, point{5, 9}},
	{point{8, 0}, point{0, 8}},
	{point{9, 4}, point{3, 4}},
	{point{2, 2}, point{2, 1}},
	{point{7, 0}, point{7, 4}},
	{point{6, 4}, point{2, 0}},
	{point{0, 9}, point{2, 9}},
	{point{3, 4}, point{1, 4}},
	{point{0, 0}, point{8, 8}},
	{point{5, 5}, point{8, 2}},
}

var input = []line{
	{point{491, 392}, point{34, 392}},
	{point{337, 52}, point{485, 52}},
	{point{256, 605}, point{256, 959}},
	{point{889, 142}, point{153, 878}},
	{point{189, 59}, point{512, 382}},
	{point{399, 193}, point{598, 193}},
	{point{578, 370}, point{795, 153}},
	{point{79, 450}, point{569, 450}},
	{point{565, 444}, point{270, 149}},
	{point{39, 28}, point{39, 846}},
	{point{114, 353}, point{114, 383}},
	{point{356, 61}, point{356, 327}},
	{point{140, 132}, point{515, 132}},
	{point{361, 848}, point{361, 527}},
	{point{466, 257}, point{466, 784}},
	{point{818, 397}, point{818, 14}},
	{point{693, 554}, point{693, 984}},
	{point{171, 290}, point{171, 655}},
	{point{989, 889}, point{170, 70}},
	{point{527, 855}, point{527, 549}},
	{point{209, 355}, point{486, 355}},
	{point{800, 430}, point{291, 939}},
	{point{980, 38}, point{31, 987}},
	{point{964, 559}, point{964, 799}},
	{point{491, 612}, point{930, 173}},
	{point{57, 977}, point{958, 76}},
	{point{149, 465}, point{349, 465}},
	{point{512, 624}, point{629, 507}},
	{point{460, 943}, point{460, 441}},
	{point{988, 29}, point{988, 968}},
	{point{104, 337}, point{441, 337}},
	{point{939, 48}, point{939, 546}},
	{point{941, 904}, point{498, 461}},
	{point{850, 972}, point{649, 771}},
	{point{840, 901}, point{23, 84}},
	{point{231, 790}, point{231, 873}},
	{point{230, 668}, point{840, 58}},
	{point{410, 922}, point{435, 897}},
	{point{341, 337}, point{341, 406}},
	{point{264, 752}, point{258, 752}},
	{point{457, 969}, point{457, 757}},
	{point{465, 42}, point{465, 350}},
	{point{748, 783}, point{502, 783}},
	{point{461, 930}, point{461, 142}},
	{point{392, 265}, point{215, 265}},
	{point{417, 805}, point{417, 231}},
	{point{825, 870}, point{60, 105}},
	{point{524, 167}, point{703, 346}},
	{point{963, 829}, point{308, 174}},
	{point{730, 361}, point{730, 252}},
	{point{61, 373}, point{61, 593}},
	{point{873, 893}, point{132, 152}},
	{point{820, 719}, point{417, 719}},
	{point{142, 238}, point{212, 168}},
	{point{142, 653}, point{676, 119}},
	{point{392, 955}, point{392, 453}},
	{point{368, 385}, point{414, 385}},
	{point{464, 762}, point{592, 762}},
	{point{542, 168}, point{542, 789}},
	{point{622, 693}, point{166, 237}},
	{point{477, 290}, point{792, 290}},
	{point{731, 56}, point{731, 677}},
	{point{516, 77}, point{326, 77}},
	{point{595, 973}, point{779, 973}},
	{point{68, 487}, point{128, 487}},
	{point{389, 738}, point{762, 738}},
	{point{721, 13}, point{827, 119}},
	{point{797, 625}, point{347, 625}},
	{point{75, 67}, point{75, 458}},
	{point{931, 142}, point{219, 854}},
	{point{422, 835}, point{980, 835}},
	{point{278, 565}, point{753, 565}},
	{point{225, 970}, point{806, 389}},
	{point{791, 725}, point{691, 725}},
	{point{924, 975}, point{18, 69}},
	{point{326, 763}, point{969, 120}},
	{point{663, 895}, point{663, 559}},
	{point{940, 965}, point{142, 167}},
	{point{146, 425}, point{791, 425}},
	{point{832, 968}, point{272, 408}},
	{point{494, 804}, point{694, 804}},
	{point{23, 25}, point{900, 902}},
	{point{621, 163}, point{894, 163}},
	{point{587, 605}, point{587, 716}},
	{point{41, 931}, point{383, 589}},
	{point{888, 530}, point{341, 530}},
	{point{292, 801}, point{292, 567}},
	{point{537, 213}, point{245, 213}},
	{point{513, 84}, point{527, 84}},
	{point{623, 516}, point{623, 128}},
	{point{549, 729}, point{509, 729}},
	{point{576, 232}, point{869, 232}},
	{point{513, 847}, point{433, 847}},
	{point{536, 612}, point{434, 612}},
	{point{608, 377}, point{33, 952}},
	{point{137, 762}, point{424, 475}},
	{point{329, 286}, point{584, 541}},
	{point{493, 296}, point{493, 316}},
	{point{160, 343}, point{189, 343}},
	{point{477, 929}, point{976, 430}},
	{point{695, 607}, point{557, 607}},
	{point{745, 322}, point{28, 322}},
	{point{777, 73}, point{76, 774}},
	{point{163, 723}, point{163, 816}},
	{point{30, 549}, point{63, 516}},
	{point{163, 914}, point{898, 179}},
	{point{603, 823}, point{603, 78}},
	{point{498, 616}, point{886, 228}},
	{point{229, 591}, point{341, 591}},
	{point{742, 841}, point{343, 841}},
	{point{720, 808}, point{934, 808}},
	{point{985, 48}, point{48, 985}},
	{point{368, 859}, point{178, 859}},
	{point{506, 30}, point{144, 30}},
	{point{19, 110}, point{19, 750}},
	{point{293, 689}, point{293, 294}},
	{point{13, 462}, point{980, 462}},
	{point{536, 963}, point{346, 773}},
	{point{836, 471}, point{462, 471}},
	{point{506, 952}, point{489, 952}},
	{point{830, 15}, point{461, 15}},
	{point{392, 378}, point{237, 378}},
	{point{295, 48}, point{295, 825}},
	{point{264, 679}, point{264, 602}},
	{point{487, 582}, point{487, 116}},
	{point{832, 677}, point{788, 677}},
	{point{469, 770}, point{211, 512}},
	{point{400, 773}, point{394, 773}},
	{point{262, 836}, point{262, 454}},
	{point{51, 17}, point{969, 935}},
	{point{483, 525}, point{838, 880}},
	{point{71, 124}, point{164, 31}},
	{point{103, 226}, point{912, 226}},
	{point{785, 169}, point{785, 454}},
	{point{858, 825}, point{176, 143}},
	{point{248, 960}, point{427, 781}},
	{point{255, 37}, point{767, 37}},
	{point{832, 149}, point{506, 149}},
	{point{256, 246}, point{86, 246}},
	{point{447, 448}, point{765, 448}},
	{point{654, 159}, point{654, 158}},
	{point{120, 500}, point{120, 341}},
	{point{200, 19}, point{839, 658}},
	{point{451, 251}, point{763, 563}},
	{point{931, 75}, point{931, 312}},
	{point{69, 404}, point{311, 646}},
	{point{31, 678}, point{31, 231}},
	{point{410, 307}, point{410, 236}},
	{point{988, 976}, point{387, 375}},
	{point{654, 402}, point{738, 486}},
	{point{30, 942}, point{942, 30}},
	{point{115, 652}, point{98, 669}},
	{point{405, 764}, point{375, 734}},
	{point{88, 759}, point{125, 759}},
	{point{636, 835}, point{722, 835}},
	{point{300, 60}, point{126, 60}},
	{point{159, 225}, point{159, 319}},
	{point{934, 188}, point{934, 74}},
	{point{46, 822}, point{708, 160}},
	{point{605, 612}, point{605, 463}},
	{point{200, 281}, point{536, 617}},
	{point{392, 11}, point{79, 324}},
	{point{917, 126}, point{258, 785}},
	{point{803, 143}, point{803, 180}},
	{point{116, 556}, point{651, 556}},
	{point{922, 222}, point{468, 676}},
	{point{266, 782}, point{896, 782}},
	{point{733, 448}, point{764, 448}},
	{point{915, 75}, point{305, 685}},
	{point{150, 243}, point{842, 243}},
	{point{485, 641}, point{963, 641}},
	{point{965, 206}, point{965, 275}},
	{point{78, 868}, point{748, 198}},
	{point{37, 947}, point{859, 947}},
	{point{429, 289}, point{429, 48}},
	{point{378, 261}, point{378, 624}},
	{point{768, 494}, point{768, 782}},
	{point{702, 566}, point{113, 566}},
	{point{290, 148}, point{913, 771}},
	{point{806, 931}, point{849, 931}},
	{point{725, 970}, point{299, 970}},
	{point{38, 565}, point{740, 565}},
	{point{262, 730}, point{973, 730}},
	{point{826, 376}, point{826, 97}},
	{point{318, 576}, point{318, 227}},
	{point{159, 868}, point{448, 868}},
	{point{344, 256}, point{344, 615}},
	{point{824, 188}, point{588, 424}},
	{point{505, 843}, point{897, 843}},
	{point{293, 348}, point{293, 488}},
	{point{433, 833}, point{165, 565}},
	{point{56, 471}, point{169, 471}},
	{point{77, 896}, point{914, 59}},
	{point{405, 904}, point{405, 174}},
	{point{274, 364}, point{274, 88}},
	{point{785, 704}, point{538, 704}},
	{point{877, 389}, point{681, 389}},
	{point{790, 936}, point{327, 936}},
	{point{89, 143}, point{755, 809}},
	{point{721, 450}, point{721, 406}},
	{point{253, 664}, point{811, 664}},
	{point{881, 143}, point{97, 927}},
	{point{205, 738}, point{645, 738}},
	{point{869, 951}, point{282, 364}},
	{point{374, 697}, point{374, 592}},
	{point{251, 989}, point{251, 977}},
	{point{521, 187}, point{885, 187}},
	{point{536, 401}, point{536, 38}},
	{point{636, 840}, point{636, 873}},
	{point{695, 333}, point{52, 976}},
	{point{790, 757}, point{790, 358}},
	{point{314, 765}, point{882, 765}},
	{point{880, 439}, point{127, 439}},
	{point{266, 848}, point{810, 304}},
	{point{802, 419}, point{802, 936}},
	{point{554, 67}, point{554, 956}},
	{point{311, 379}, point{685, 753}},
	{point{183, 544}, point{305, 544}},
	{point{857, 341}, point{407, 791}},
	{point{306, 559}, point{727, 980}},
	{point{184, 477}, point{509, 152}},
	{point{934, 174}, point{934, 154}},
	{point{28, 12}, point{28, 968}},
	{point{418, 984}, point{112, 678}},
	{point{788, 89}, point{837, 89}},
	{point{229, 425}, point{192, 462}},
	{point{714, 701}, point{424, 411}},
	{point{198, 313}, point{156, 355}},
	{point{142, 742}, point{215, 742}},
	{point{15, 639}, point{15, 787}},
	{point{573, 396}, point{462, 396}},
	{point{954, 977}, point{76, 99}},
	{point{645, 448}, point{652, 448}},
	{point{958, 822}, point{376, 240}},
	{point{47, 359}, point{212, 194}},
	{point{524, 366}, point{524, 916}},
	{point{100, 977}, point{501, 576}},
	{point{932, 148}, point{115, 965}},
	{point{854, 120}, point{421, 553}},
	{point{318, 630}, point{318, 964}},
	{point{196, 31}, point{874, 709}},
	{point{812, 826}, point{812, 679}},
	{point{111, 890}, point{897, 104}},
	{point{46, 35}, point{972, 35}},
	{point{40, 842}, point{40, 835}},
	{point{390, 510}, point{98, 510}},
	{point{832, 57}, point{124, 765}},
	{point{422, 331}, point{422, 44}},
	{point{696, 837}, point{696, 555}},
	{point{849, 571}, point{849, 679}},
	{point{598, 143}, point{598, 261}},
	{point{670, 745}, point{670, 757}},
	{point{660, 390}, point{660, 912}},
	{point{960, 578}, point{960, 253}},
	{point{123, 343}, point{123, 28}},
	{point{643, 199}, point{969, 199}},
	{point{66, 642}, point{669, 39}},
	{point{776, 30}, point{776, 173}},
	{point{595, 951}, point{84, 951}},
	{point{908, 183}, point{724, 367}},
	{point{330, 332}, point{330, 455}},
	{point{954, 955}, point{188, 955}},
	{point{981, 269}, point{90, 269}},
	{point{235, 579}, point{513, 579}},
	{point{217, 25}, point{217, 990}},
	{point{811, 810}, point{811, 405}},
	{point{245, 255}, point{367, 255}},
	{point{860, 225}, point{860, 100}},
	{point{753, 626}, point{697, 626}},
	{point{755, 404}, point{836, 404}},
	{point{733, 476}, point{336, 476}},
	{point{562, 172}, point{964, 172}},
	{point{339, 989}, point{749, 989}},
	{point{167, 581}, point{167, 611}},
	{point{217, 475}, point{217, 747}},
	{point{103, 598}, point{431, 270}},
	{point{11, 989}, point{989, 11}},
	{point{925, 90}, point{46, 969}},
	{point{26, 963}, point{935, 54}},
	{point{40, 925}, point{40, 816}},
	{point{67, 942}, point{984, 25}},
	{point{933, 652}, point{933, 242}},
	{point{942, 292}, point{942, 138}},
	{point{889, 909}, point{180, 200}},
	{point{604, 770}, point{237, 770}},
	{point{30, 627}, point{973, 627}},
	{point{750, 777}, point{750, 645}},
	{point{254, 797}, point{254, 169}},
	{point{939, 167}, point{347, 759}},
	{point{889, 682}, point{394, 682}},
	{point{788, 338}, point{388, 338}},
	{point{757, 252}, point{169, 252}},
	{point{806, 131}, point{699, 131}},
	{point{562, 270}, point{562, 481}},
	{point{950, 349}, point{459, 840}},
	{point{219, 915}, point{932, 202}},
	{point{977, 505}, point{977, 708}},
	{point{915, 559}, point{915, 125}},
	{point{366, 397}, point{366, 717}},
	{point{54, 723}, point{433, 723}},
	{point{570, 842}, point{236, 508}},
	{point{513, 365}, point{513, 80}},
	{point{569, 523}, point{569, 266}},
	{point{278, 764}, point{278, 178}},
	{point{136, 136}, point{84, 84}},
	{point{787, 108}, point{787, 809}},
	{point{461, 388}, point{855, 782}},
	{point{64, 898}, point{848, 114}},
	{point{628, 71}, point{178, 521}},
	{point{842, 66}, point{842, 699}},
	{point{293, 68}, point{742, 68}},
	{point{960, 102}, point{358, 704}},
	{point{834, 669}, point{27, 669}},
	{point{11, 43}, point{374, 406}},
	{point{399, 803}, point{340, 803}},
	{point{564, 211}, point{20, 755}},
	{point{370, 841}, point{370, 321}},
	{point{518, 590}, point{518, 255}},
	{point{470, 150}, point{470, 850}},
	{point{769, 182}, point{234, 717}},
	{point{97, 787}, point{97, 382}},
	{point{36, 31}, point{982, 977}},
	{point{831, 467}, point{471, 827}},
	{point{253, 836}, point{547, 836}},
	{point{957, 681}, point{957, 919}},
	{point{768, 831}, point{768, 275}},
	{point{98, 36}, point{955, 893}},
	{point{283, 413}, point{840, 413}},
	{point{21, 870}, point{20, 870}},
	{point{979, 507}, point{979, 37}},
	{point{339, 757}, point{210, 757}},
	{point{388, 594}, point{801, 594}},
	{point{867, 939}, point{91, 163}},
	{point{755, 864}, point{755, 501}},
	{point{856, 177}, point{736, 57}},
	{point{74, 365}, point{376, 63}},
	{point{386, 451}, point{815, 22}},
	{point{389, 883}, point{679, 593}},
	{point{116, 216}, point{157, 175}},
	{point{693, 960}, point{693, 454}},
	{point{704, 962}, point{306, 962}},
	{point{613, 442}, point{867, 442}},
	{point{578, 13}, point{578, 855}},
	{point{417, 683}, point{118, 683}},
	{point{127, 161}, point{742, 161}},
	{point{646, 979}, point{646, 270}},
	{point{14, 842}, point{14, 802}},
	{point{496, 902}, point{506, 912}},
	{point{468, 354}, point{468, 875}},
	{point{714, 431}, point{714, 172}},
	{point{554, 297}, point{554, 790}},
	{point{717, 664}, point{883, 664}},
	{point{551, 182}, point{980, 611}},
	{point{794, 932}, point{499, 637}},
	{point{384, 499}, point{507, 499}},
	{point{32, 368}, point{257, 368}},
	{point{984, 131}, point{904, 131}},
	{point{973, 16}, point{10, 979}},
	{point{189, 178}, point{189, 752}},
	{point{492, 404}, point{492, 593}},
	{point{11, 515}, point{117, 515}},
	{point{230, 182}, point{230, 954}},
	{point{652, 16}, point{663, 16}},
	{point{698, 693}, point{490, 693}},
	{point{252, 942}, point{587, 942}},
	{point{551, 901}, point{428, 778}},
	{point{899, 320}, point{903, 316}},
	{point{14, 577}, point{313, 278}},
	{point{409, 576}, point{409, 475}},
	{point{466, 883}, point{819, 883}},
	{point{221, 472}, point{609, 472}},
	{point{686, 828}, point{686, 720}},
	{point{988, 989}, point{13, 14}},
	{point{514, 171}, point{227, 171}},
	{point{868, 842}, point{632, 842}},
	{point{279, 824}, point{697, 406}},
	{point{678, 464}, point{678, 687}},
	{point{736, 358}, point{736, 259}},
	{point{933, 66}, point{24, 975}},
	{point{679, 470}, point{679, 689}},
	{point{979, 953}, point{45, 19}},
	{point{98, 826}, point{737, 187}},
	{point{612, 732}, point{612, 681}},
	{point{985, 23}, point{23, 985}},
	{point{787, 732}, point{332, 277}},
	{point{660, 211}, point{660, 61}},
	{point{395, 19}, point{246, 19}},
	{point{129, 876}, point{955, 50}},
	{point{676, 246}, point{821, 246}},
	{point{980, 26}, point{18, 988}},
	{point{142, 945}, point{142, 218}},
	{point{165, 240}, point{540, 240}},
	{point{941, 522}, point{941, 129}},
	{point{876, 274}, point{876, 340}},
	{point{627, 782}, point{905, 782}},
	{point{928, 235}, point{246, 235}},
	{point{336, 449}, point{92, 205}},
	{point{748, 62}, point{748, 787}},
	{point{804, 725}, point{356, 277}},
	{point{910, 89}, point{19, 980}},
	{point{391, 99}, point{155, 335}},
	{point{608, 127}, point{516, 219}},
	{point{337, 255}, point{337, 649}},
	{point{818, 831}, point{818, 859}},
	{point{146, 204}, point{301, 359}},
	{point{629, 646}, point{906, 923}},
	{point{87, 860}, point{824, 123}},
	{point{613, 867}, point{613, 946}},
	{point{286, 339}, point{286, 626}},
	{point{942, 120}, point{595, 467}},
	{point{35, 207}, point{187, 207}},
	{point{684, 559}, point{283, 158}},
	{point{48, 768}, point{48, 349}},
	{point{656, 965}, point{656, 27}},
	{point{865, 341}, point{865, 576}},
	{point{218, 786}, point{152, 786}},
	{point{697, 69}, point{583, 69}},
	{point{790, 79}, point{552, 79}},
	{point{310, 547}, point{846, 11}},
	{point{428, 809}, point{428, 940}},
	{point{664, 829}, point{664, 455}},
	{point{265, 775}, point{749, 775}},
	{point{362, 221}, point{309, 168}},
	{point{437, 253}, point{437, 597}},
	{point{601, 324}, point{245, 680}},
	{point{24, 69}, point{24, 476}},
	{point{420, 344}, point{420, 525}},
	{point{215, 866}, point{635, 866}},
	{point{926, 770}, point{315, 770}},
	{point{413, 650}, point{413, 624}},
	{point{751, 765}, point{475, 489}},
	{point{673, 709}, point{39, 75}},
	{point{230, 689}, point{805, 689}},
	{point{31, 209}, point{789, 967}},
	{point{698, 255}, point{909, 255}},
	{point{641, 752}, point{866, 527}},
	{point{346, 780}, point{391, 825}},
	{point{328, 905}, point{328, 130}},
	{point{628, 674}, point{628, 354}},
	{point{666, 110}, point{98, 678}},
	{point{846, 651}, point{846, 371}},
	{point{28, 946}, point{28, 482}},
	{point{289, 844}, point{458, 675}},
	{point{605, 602}, point{605, 297}},
	{point{355, 217}, point{239, 217}},
	{point{453, 96}, point{195, 354}},
	{point{988, 90}, point{145, 933}},
	{point{801, 194}, point{801, 109}},
	{point{894, 708}, point{894, 212}},
	{point{177, 447}, point{607, 877}},
	{point{824, 391}, point{788, 391}},
	{point{386, 940}, point{471, 855}},
	{point{703, 425}, point{583, 425}},
	{point{848, 110}, point{36, 922}},
	{point{603, 596}, point{685, 678}},
	{point{584, 458}, point{584, 482}},
	{point{464, 903}, point{343, 903}},
	{point{888, 413}, point{405, 413}},
	{point{320, 185}, point{103, 185}},
	{point{475, 458}, point{55, 878}},
	{point{371, 843}, point{371, 466}},
	{point{785, 507}, point{785, 570}},
	{point{904, 553}, point{904, 983}},
	{point{872, 600}, point{872, 848}},
	{point{296, 693}, point{751, 238}},
	{point{490, 488}, point{322, 488}},
	{point{37, 371}, point{185, 223}},
	{point{238, 618}, point{238, 883}},
	{point{232, 89}, point{123, 89}},
	{point{20, 14}, point{961, 955}},
	{point{794, 318}, point{914, 318}},
	{point{407, 499}, point{246, 338}},
	{point{641, 514}, point{227, 514}},
	{point{284, 210}, point{562, 488}},
	{point{164, 566}, point{498, 900}},
	{point{20, 825}, point{150, 955}},
	{point{235, 384}, point{537, 686}},
	{point{151, 116}, point{979, 944}},
	{point{697, 133}, point{59, 771}},
	{point{212, 226}, point{38, 226}},
	{point{523, 527}, point{523, 497}},
	{point{119, 493}, point{352, 726}},
	{point{927, 157}, point{154, 930}},
	{point{336, 149}, point{581, 394}},
	{point{103, 580}, point{354, 580}},
	{point{891, 494}, point{532, 853}},
	{point{22, 272}, point{538, 788}},
	{point{544, 296}, point{519, 271}},
	{point{821, 382}, point{821, 155}},
	{point{501, 807}, point{501, 202}},
	{point{588, 76}, point{708, 76}},
	{point{773, 681}, point{184, 681}},
	{point{754, 936}, point{86, 268}},
	{point{582, 972}, point{40, 972}},
	{point{530, 458}, point{530, 329}},
	{point{109, 433}, point{649, 433}},
	{point{411, 215}, point{411, 311}},
	{point{433, 568}, point{433, 585}},
	{point{232, 504}, point{799, 504}},
	{point{72, 442}, point{38, 442}},
}
